<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <title>Authentication Required</title>
   <style>
      body {
         font-family: Arial, sans-serif;
         background-color: #1a1a1a;
         color: #fff;
         display: flex;
         justify-content: center;
         align-items: center;
         min-height: 100vh;
         margin: 0;
         padding: 20px;
      }
      .container {
         text-align: center;
         padding: 40px;
         background-color: #2a2a2a;
         border-radius: 10px;
         box-shadow: 0 4px 6px rgba(0,0,0,0.3);
         border: 2px solid #ff6b6b;
      }
      h1 {
         color: #ff6b6b;
         margin-bottom: 20px;
      }
      p {
         margin: 10px 0;
         font-size: 16px;
      }
      .reload-btn {
         margin-top: 20px;
         padding: 10px 20px;
         background-color: #4CAF50;
         color: white;
         border: none;
         border-radius: 5px;
         font-size: 16px;
         cursor: pointer;
      }
      .reload-btn:hover {
         background-color: #45a049;
      }
   </style>
</head>
<body>
   <div class="container">
      <h1>⚠️ &nbsp;Authentication Required</h1>
      <p>Your session has expired.</p>
      <p>Please refresh the page to log in again.</p>
      <p style="margin-top: 20px;">Auto-reloading in <span id="countdown">10</span> seconds...</p>
      <button class="reload-btn" onclick="reloadParent()">Reload Now</button>
   </div>

   <script>
      console.log('Auth error page loaded');

      // Notify parent window of authentication error
      function notifyParent() {
         console.log('Attempting to notify parent window');
         if (window.parent && window.parent !== window) {
            console.log('Sending auth_error message to parent');
            window.parent.postMessage({ type: 'auth_error' }, '*');
         } else {
            console.log('No parent window found, reloading current window');
            window.location.href = '/auth/login';
         }
      }

      function reloadParent() {
         console.log('Reload button clicked');
         notifyParent();
      }

      // Auto-reload after 10 seconds
      let countdown = 10;
      const countdownEl = document.getElementById('countdown');

      const timer = setInterval(function() {
         countdown--;
         if (countdownEl) {
            countdownEl.textContent = countdown;
         }
         if (countdown <= 0) {
            clearInterval(timer);
            notifyParent();
         }
      }, 1000);
   </script>
</body>
</html>
